"use strict";!function(t){if("function"==typeof define&&define.amd)define(t);else if("object"==typeof exports)module.exports=t();else{var e=window.Cookies,r=window.Cookies=t(window.jQuery);r.noConflict=function(){return window.Cookies=e,r}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}function e(r){function i(e,n,o){var s;if(arguments.length>1){if(o=t({path:"/"},i.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{s=JSON.stringify(n),/^[\{\[]/.test(s)&&(n=s)}catch(t){}return n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",n,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure&&"; secure"].join("")}e||(s={});for(var u=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,c=0;c<u.length;c++){var l=u[c].split("="),f=l[0].replace(h,decodeURIComponent),p=l.slice(1).join("=");if('"'===p.charAt(0)&&(p=p.slice(1,-1)),p=r&&r(p,f)||p.replace(h,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(t){}if(e===f){s=p;break}e||(s[f]=p)}return s}return i.get=i.set=i,i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(e,r){i(e,"",t(r,{expires:-1}))},i.withConverter=e,i}return e()}),function(t){function e(t){return t&&(t=t.toString().replace(o.pluses,"%20"),t=decodeURIComponent(t)),t}function r(t){var e=o.uri_parser,r=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],i=e.exec(t||""),n={};return r.forEach(function(t,e){n[t]=i[e]||""}),n}function i(t){var r,i,n,s,a,u,h,c=[];if(void 0===t||null===t||""===t)return c;for(0===t.indexOf("?")&&(t=t.substring(1)),i=t.toString().split(o.query_separator),r=0,h=i.length;r<h;r++)n=i[r],0!==(s=n.indexOf("="))&&(a=e(n.substring(0,s)),u=e(n.substring(s+1)),c.push(s===-1?[n,null]:[a,u]));return c}function n(t){this.uriParts=r(t),this.queryPairs=i(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var o={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var r,i;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),o=n.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=e),i=0;i<o;){var s;i in n&&(s=n[i],t.call(r,s,i,n)),i++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(t){n.prototype[t]=function(e){return void 0!==e&&(this.uriParts[t]=e),this.uriParts[t]}}),n.prototype.hasAuthorityPrefix=function(t){return void 0!==t&&(this.hasAuthorityPrefixUserPref=t),null===this.hasAuthorityPrefixUserPref?this.uriParts.source.indexOf("//")!==-1:this.hasAuthorityPrefixUserPref},n.prototype.isColonUri=function(t){if(void 0===t)return!!this.uriParts.isColonUri;this.uriParts.isColonUri=!!t},n.prototype.query=function(t){var e,r,n,o="";for(void 0!==t&&(this.queryPairs=i(t)),e=0,n=this.queryPairs.length;e<n;e++)r=this.queryPairs[e],o.length>0&&(o+="&"),null===r[1]?o+=r[0]:(o+=r[0],o+="=",void 0!==r[1]&&(o+=encodeURIComponent(r[1])));return o.length>0?"?"+o:o},n.prototype.getQueryParamValue=function(t){var e,r,i;for(r=0,i=this.queryPairs.length;r<i;r++)if(e=this.queryPairs[r],t===e[0])return e[1]},n.prototype.getQueryParamValues=function(t){var e,r,i,n=[];for(e=0,i=this.queryPairs.length;e<i;e++)r=this.queryPairs[e],t===r[0]&&n.push(r[1]);return n},n.prototype.deleteQueryParam=function(t,r){var i,n,o,s,a,u=[];for(i=0,a=this.queryPairs.length;i<a;i++)n=this.queryPairs[i],o=e(n[0])===e(t),s=n[1]===r,(1!==arguments.length||o)&&(2!==arguments.length||o&&s)||u.push(n);return this.queryPairs=u,this},n.prototype.addQueryParam=function(t,e,r){return 3===arguments.length&&r!==-1?(r=Math.min(r,this.queryPairs.length),this.queryPairs.splice(r,0,[t,e])):arguments.length>0&&this.queryPairs.push([t,e]),this},n.prototype.hasQueryParam=function(t){var e,r=this.queryPairs.length;for(e=0;e<r;e++)if(this.queryPairs[e][0]==t)return!0;return!1},n.prototype.replaceQueryParam=function(t,r,i){var n,o,s=-1,a=this.queryPairs.length;if(3===arguments.length){for(n=0;n<a;n++)if(o=this.queryPairs[n],e(o[0])===e(t)&&decodeURIComponent(o[1])===e(i)){s=n;break}s>=0&&this.deleteQueryParam(t,e(i)).addQueryParam(t,r,s)}else{for(n=0;n<a;n++)if(o=this.queryPairs[n],e(o[0])===e(t)){s=n;break}this.deleteQueryParam(t),this.addQueryParam(t,r,s)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(t){var e="set"+t.charAt(0).toUpperCase()+t.slice(1);n.prototype[e]=function(e){return this[t](e),this}}),n.prototype.scheme=function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.hasAuthorityPrefix()&&this.host()&&(t+="//"),t},n.prototype.origin=function(){var t=this.scheme();return this.userInfo()&&this.host()&&(t+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(t+="@")),this.host()&&(t+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(t+=":"+this.port())),t},n.prototype.addTrailingSlash=function(){var t=this.path()||"";return"/"!==t.substr(-1)&&this.path(t+"/"),this},n.prototype.toString=function(){var t,e=this.origin();return this.isColonUri()?this.path()&&(e+=":"+this.path()):this.path()?(t=this.path(),o.ends_with_slashes.test(e)||o.starts_with_slashes.test(t)?(e&&e.replace(o.ends_with_slashes,"/"),t=t.replace(o.starts_with_slashes,"/")):e+="/",e+=t):this.host()&&(this.query().toString()||this.anchor())&&(e+="/"),this.query().toString()&&(e+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(e+="#"),e+=this.anchor()),e},n.prototype.clone=function(){return new n(this.toString())},"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof module&&void 0!==module.exports?module.exports=n:t.Uri=n}(this),function(){for(var t,e=function(){},r=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=r.length,n=window.console=window.console||{};i--;)t=r[i],n[t]||(n[t]=e)}(),String.prototype.formatArray=function(t){return this.replace(/\{(\d+)\}/g,function(e,r){return t[r]})},String.prototype.render=function(t){return this.replace(/\{(\w+)\}/g,function(e,r){return t[r]})},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},function(t){t.fn.validEmail=function(){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t(this).val())},t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}})}(jQuery),$(document).ready(function(){var t={watched:function(t,e){return $.post("/subscriptions/watched",{video:t}).done(function(t){t&&t.status&&e.fadeOut(function(){e.remove()}),console.log(t)}).fail(function(){e.removeClass("watched")})}};$(".btn-login").click(function(t){t.preventDefault();var e=450,r=600,i=window.screenLeft||screen.left||0,n=window.screenTop||screen.top||0,o=window.innerWidth||document.documentElement.clientWidth||screen.width,s=window.innerHeight||document.documentElement.clientHeight||screen.height,a=o/2-e/2+i,u=s/2-r/2+n,h=window.open(this.href,"popUpWindow","centerscreen=true,resizable,scrollbars,status,width="+e+",height="+r+",top="+u+",left="+a);h.onbeforeunload=function(){location.reload()};var c=setInterval(function(){h.closed&&(console.log("window closed"),location.reload(),clearInterval(c))},100)});var e=$(".videos");$(".watched").click(function(){var r=$(this).closest(".video");t.watched(r.data("id"),r).done(function(){e.text(parseInt(e.text(),10)-1)})}),$(".watched-all").click(function(r){r.preventDefault();var i=$(".video"),n=i.map(function(){return $(this).data("id")}).get().join(",");t.watched(n,i).done(function(){e.text(parseInt(e.text(),10)-i.length)})}),$(".filter select").change(function(){$(this).closest("form").submit()}),$(".filter").submit(function(){$(this).find("input, select").each(function(){var t=$(this);""===t.val()&&t.removeAttr("name")})})});