!function(t){function e(t){return t&&(t=t.toString().replace(i.pluses,"%20"),t=decodeURIComponent(t)),t}function n(t){var e=i.uri_parser,n=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],r=e.exec(t||""),o={};return n.forEach(function(t,e){o[t]=r[e]||""}),o}function r(t){var n,r,o,s,a,c,u,l=[];if("undefined"==typeof t||null===t||""===t)return l;for(0===t.indexOf("?")&&(t=t.substring(1)),r=t.toString().split(i.query_separator),n=0,u=r.length;u>n;n++)o=r[n],s=o.indexOf("="),0!==s&&(a=e(o.substring(0,s)),c=e(o.substring(s+1)),l.push(-1===s?[o,null]:[a,c]));return l}function o(t){this.uriParts=n(t),this.queryPairs=r(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var i={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=0;i>r;){var s;r in o&&(s=o[r],t.call(n,s,r,o)),r++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(t){o.prototype[t]=function(e){return"undefined"!=typeof e&&(this.uriParts[t]=e),this.uriParts[t]}}),o.prototype.hasAuthorityPrefix=function(t){return"undefined"!=typeof t&&(this.hasAuthorityPrefixUserPref=t),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},o.prototype.isColonUri=function(t){return"undefined"==typeof t?!!this.uriParts.isColonUri:void(this.uriParts.isColonUri=!!t)},o.prototype.query=function(t){var e,n,o,i="";for("undefined"!=typeof t&&(this.queryPairs=r(t)),e=0,o=this.queryPairs.length;o>e;e++)n=this.queryPairs[e],i.length>0&&(i+="&"),null===n[1]?i+=n[0]:(i+=n[0],i+="=","undefined"!=typeof n[1]&&(i+=encodeURIComponent(n[1])));return i.length>0?"?"+i:i},o.prototype.getQueryParamValue=function(t){var e,n,r;for(n=0,r=this.queryPairs.length;r>n;n++)if(e=this.queryPairs[n],t===e[0])return e[1]},o.prototype.getQueryParamValues=function(t){var e,n,r,o=[];for(e=0,r=this.queryPairs.length;r>e;e++)n=this.queryPairs[e],t===n[0]&&o.push(n[1]);return o},o.prototype.deleteQueryParam=function(t,n){var r,o,i,s,a,c=[];for(r=0,a=this.queryPairs.length;a>r;r++)o=this.queryPairs[r],i=e(o[0])===e(t),s=o[1]===n,(1!==arguments.length||i)&&(2!==arguments.length||i&&s)||c.push(o);return this.queryPairs=c,this},o.prototype.addQueryParam=function(t,e,n){return 3===arguments.length&&-1!==n?(n=Math.min(n,this.queryPairs.length),this.queryPairs.splice(n,0,[t,e])):arguments.length>0&&this.queryPairs.push([t,e]),this},o.prototype.hasQueryParam=function(t){var e,n=this.queryPairs.length;for(e=0;n>e;e++)if(this.queryPairs[e][0]==t)return!0;return!1},o.prototype.replaceQueryParam=function(t,n,r){var o,i,s=-1,a=this.queryPairs.length;if(3===arguments.length){for(o=0;a>o;o++)if(i=this.queryPairs[o],e(i[0])===e(t)&&decodeURIComponent(i[1])===e(r)){s=o;break}s>=0&&this.deleteQueryParam(t,e(r)).addQueryParam(t,n,s)}else{for(o=0;a>o;o++)if(i=this.queryPairs[o],e(i[0])===e(t)){s=o;break}this.deleteQueryParam(t),this.addQueryParam(t,n,s)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(t){var e="set"+t.charAt(0).toUpperCase()+t.slice(1);o.prototype[e]=function(e){return this[t](e),this}}),o.prototype.scheme=function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.hasAuthorityPrefix()&&this.host()&&(t+="//"),t},o.prototype.origin=function(){var t=this.scheme();return this.userInfo()&&this.host()&&(t+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(t+="@")),this.host()&&(t+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(t+=":"+this.port())),t},o.prototype.addTrailingSlash=function(){var t=this.path()||"";return"/"!==t.substr(-1)&&this.path(t+"/"),this},o.prototype.toString=function(){var t,e=this.origin();return this.isColonUri()?this.path()&&(e+=":"+this.path()):this.path()?(t=this.path(),i.ends_with_slashes.test(e)||i.starts_with_slashes.test(t)?(e&&e.replace(i.ends_with_slashes,"/"),t=t.replace(i.starts_with_slashes,"/")):e+="/",e+=t):this.host()&&(this.query().toString()||this.anchor())&&(e+="/"),this.query().toString()&&(e+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(e+="#"),e+=this.anchor()),e},o.prototype.clone=function(){return new o(this.toString())},"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=o:t.Uri=o}(this),function(t){if("function"==typeof define&&define.amd)define(t);else if("object"==typeof exports)module.exports=t();else{var e=window.Cookies,n=window.Cookies=t(window.jQuery);n.noConflict=function(){return window.Cookies=e,n}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(n){function r(e,o,i){var s;if(arguments.length>1){if(i=t({path:"/"},r.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(c){}return o=encodeURIComponent(String(o)),o=o.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure&&"; secure"].join("")}e||(s={});for(var u=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,h=0;h<u.length;h++){var f=u[h].split("="),d=f[0].replace(l,decodeURIComponent),p=f.slice(1).join("=");if('"'===p.charAt(0)&&(p=p.slice(1,-1)),p=n&&n(p,d)||p.replace(l,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(c){}if(e===d){s=p;break}e||(s[d]=p)}return s}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(e,n){r(e,"",t(n,{expires:-1}))},r.withConverter=e,r}return e()}),function(){for(var t,e=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,o=window.console=window.console||{};r--;)t=n[r],o[t]||(o[t]=e)}(),String.prototype.formatArray=function(t){return this.replace(/\{(\d+)\}/g,function(e,n){return t[n]})},String.prototype.render=function(t){return this.replace(/\{(\w+)\}/g,function(e,n){return t[n]})},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},function(t){t.fn.validEmail=function(){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t(this).val())},t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}})}(jQuery),$(document).ready(function(){"use strict";$(".btn-login").click(function(t){t.preventDefault();var e=450,n=600,r=window.screenLeft||screen.left||0,o=window.screenTop||screen.top||0,i=window.innerWidth||document.documentElement.clientWidth||screen.width,s=window.innerHeight||document.documentElement.clientHeight||screen.height,a=i/2-e/2+r,c=s/2-n/2+o,u=window.open(this.href,"popUpWindow","centerscreen=true,resizable,scrollbars,status,width="+e+",height="+n+",top="+c+",left="+a);u.onbeforeunload=function(){location.reload()};var l=setInterval(function(){u.closed&&(console.log("window closed"),location.reload(),clearInterval(l))},100)});var t=$(".videos");$(".watched").click(function(n){var r=$(this).closest(".video");e.watched(r.data("id"),r).done(function(){t.text(parseInt(t.text(),10)-1)})}),$(".watched-all").click(function(n){var r=$(".video"),o=r.map(function(){return $(this).data("id")}).get().join(",");e.watched(o,r).done(function(){t.text(parseInt(t.text(),10)-r.length)})}),$(".sort").change(function(){var t=$(this),e=t.val()||"new";Cookies.set("sort",e,{expires:30,path:"/"}),location.href=new Uri(location.href).replaceQueryParam("sort",e).toString()});var e={watched:function(t,e){return $.post("/subscriptions/watched",{video:t}).done(function(t){e.fadeOut(function(){e.remove()}),console.log(t)}).fail(function(){e.removeClass("watched")})}}});
//# sourceMappingURL=app.min.js.map