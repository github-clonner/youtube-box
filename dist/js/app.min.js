!function(t){function e(t){return t&&(t=t.toString().replace(o.pluses,"%20"),t=decodeURIComponent(t)),t}function r(t){var e=o.uri_parser,r=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],n=e.exec(t||""),i={};return r.forEach(function(t,e){i[t]=n[e]||""}),i}function n(t){var r,n,i,s,a,u,h,c=[];if("undefined"==typeof t||null===t||""===t)return c;for(0===t.indexOf("?")&&(t=t.substring(1)),n=t.toString().split(o.query_separator),r=0,h=n.length;h>r;r++)i=n[r],s=i.indexOf("="),0!==s&&(a=e(i.substring(0,s)),u=e(i.substring(s+1)),c.push(-1===s?[i,null]:[a,u]));return c}function i(t){this.uriParts=r(t),this.queryPairs=n(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var o={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var r,n;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=e),n=0;o>n;){var s;n in i&&(s=i[n],t.call(r,s,n,i)),n++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(t){i.prototype[t]=function(e){return"undefined"!=typeof e&&(this.uriParts[t]=e),this.uriParts[t]}}),i.prototype.hasAuthorityPrefix=function(t){return"undefined"!=typeof t&&(this.hasAuthorityPrefixUserPref=t),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},i.prototype.isColonUri=function(t){return"undefined"==typeof t?!!this.uriParts.isColonUri:void(this.uriParts.isColonUri=!!t)},i.prototype.query=function(t){var e,r,i,o="";for("undefined"!=typeof t&&(this.queryPairs=n(t)),e=0,i=this.queryPairs.length;i>e;e++)r=this.queryPairs[e],o.length>0&&(o+="&"),null===r[1]?o+=r[0]:(o+=r[0],o+="=","undefined"!=typeof r[1]&&(o+=encodeURIComponent(r[1])));return o.length>0?"?"+o:o},i.prototype.getQueryParamValue=function(t){var e,r,n;for(r=0,n=this.queryPairs.length;n>r;r++)if(e=this.queryPairs[r],t===e[0])return e[1]},i.prototype.getQueryParamValues=function(t){var e,r,n,i=[];for(e=0,n=this.queryPairs.length;n>e;e++)r=this.queryPairs[e],t===r[0]&&i.push(r[1]);return i},i.prototype.deleteQueryParam=function(t,r){var n,i,o,s,a,u=[];for(n=0,a=this.queryPairs.length;a>n;n++)i=this.queryPairs[n],o=e(i[0])===e(t),s=i[1]===r,(1!==arguments.length||o)&&(2!==arguments.length||o&&s)||u.push(i);return this.queryPairs=u,this},i.prototype.addQueryParam=function(t,e,r){return 3===arguments.length&&-1!==r?(r=Math.min(r,this.queryPairs.length),this.queryPairs.splice(r,0,[t,e])):arguments.length>0&&this.queryPairs.push([t,e]),this},i.prototype.hasQueryParam=function(t){var e,r=this.queryPairs.length;for(e=0;r>e;e++)if(this.queryPairs[e][0]==t)return!0;return!1},i.prototype.replaceQueryParam=function(t,r,n){var i,o,s=-1,a=this.queryPairs.length;if(3===arguments.length){for(i=0;a>i;i++)if(o=this.queryPairs[i],e(o[0])===e(t)&&decodeURIComponent(o[1])===e(n)){s=i;break}s>=0&&this.deleteQueryParam(t,e(n)).addQueryParam(t,r,s)}else{for(i=0;a>i;i++)if(o=this.queryPairs[i],e(o[0])===e(t)){s=i;break}this.deleteQueryParam(t),this.addQueryParam(t,r,s)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(t){var e="set"+t.charAt(0).toUpperCase()+t.slice(1);i.prototype[e]=function(e){return this[t](e),this}}),i.prototype.scheme=function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.hasAuthorityPrefix()&&this.host()&&(t+="//"),t},i.prototype.origin=function(){var t=this.scheme();return this.userInfo()&&this.host()&&(t+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(t+="@")),this.host()&&(t+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(t+=":"+this.port())),t},i.prototype.addTrailingSlash=function(){var t=this.path()||"";return"/"!==t.substr(-1)&&this.path(t+"/"),this},i.prototype.toString=function(){var t,e=this.origin();return this.isColonUri()?this.path()&&(e+=":"+this.path()):this.path()?(t=this.path(),o.ends_with_slashes.test(e)||o.starts_with_slashes.test(t)?(e&&e.replace(o.ends_with_slashes,"/"),t=t.replace(o.starts_with_slashes,"/")):e+="/",e+=t):this.host()&&(this.query().toString()||this.anchor())&&(e+="/"),this.query().toString()&&(e+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(e+="#"),e+=this.anchor()),e},i.prototype.clone=function(){return new i(this.toString())},"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=i:t.Uri=i}(this),function(t){if("function"==typeof define&&define.amd)define(t);else if("object"==typeof exports)module.exports=t();else{var e=window.Cookies,r=window.Cookies=t(window.jQuery);r.noConflict=function(){return window.Cookies=e,r}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function e(r){function n(e,i,o){var s;if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(u){}return i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",i,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure&&"; secure"].join("")}e||(s={});for(var h=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,f=0;f<h.length;f++){var l=h[f].split("="),p=l[0].replace(c,decodeURIComponent),d=l.slice(1).join("=");if('"'===d.charAt(0)&&(d=d.slice(1,-1)),d=r&&r(d,p)||d.replace(c,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(u){}if(e===p){s=d;break}e||(s[p]=d)}return s}return n.get=n.set=n,n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,r){n(e,"",t(r,{expires:-1}))},n.withConverter=e,n}return e()}),function(){for(var t,e=function(){},r=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],n=r.length,i=window.console=window.console||{};n--;)t=r[n],i[t]||(i[t]=e)}(),String.prototype.formatArray=function(t){return this.replace(/\{(\d+)\}/g,function(e,r){return t[r]})},String.prototype.render=function(t){return this.replace(/\{(\w+)\}/g,function(e,r){return t[r]})},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},function(t){t.fn.validEmail=function(){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t(this).val())},t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}})}(jQuery),$(document).ready(function(){"use strict";$(".btn-login").click(function(t){t.preventDefault();var e=450,r=600,n=window.screenLeft||screen.left||0,i=window.screenTop||screen.top||0,o=window.innerWidth||document.documentElement.clientWidth||screen.width,s=window.innerHeight||document.documentElement.clientHeight||screen.height,a=o/2-e/2+n,u=s/2-r/2+i,h=window.open(this.href,"popUpWindow","centerscreen=true,resizable,scrollbars,status,width="+e+",height="+r+",top="+u+",left="+a);h.onbeforeunload=function(){location.reload()};var c=setInterval(function(){h.closed&&(console.log("window closed"),location.reload(),clearInterval(c))},100)});var t=$(".videos");$(".watched").click(function(e){var n=$(this).closest(".video");r.watched(n.data("id"),n).done(function(){t.text(parseInt(t.text(),10)-1)})}),$(".watched-all").click(function(e){e.preventDefault();var n=$(".video"),i=n.map(function(){return $(this).data("id")}).get().join(",");r.watched(i,n).done(function(){t.text(parseInt(t.text(),10)-n.length)})}),$(".sort").change(function(){var t=$(this);t.closest("form").submit()}),$(".filter").submit(function(){$(this).find("input, select").each(function(){var t=$(this);""===t.val()&&t.removeAttr("name")})});var e="mqdefault.";$(".thumb img").hover(function(){var t=$(this),r=setInterval(function(){var r=t.data("thumb")||0;r=r+1>3?1:r+1,t.attr("src",t.attr("src").replace(t.data("thumb")?/\d\./:e,r+".")),t.data("thumb",r)},1e3);t.data("interval",r)},function(){var t=$(this);t.attr("src",t.attr("src").replace(/\d\./,e)),t.removeData("thumb"),clearInterval(t.data("interval"))});var r={watched:function(t,e){return $.post("/subscriptions/watched",{video:t}).done(function(t){e.fadeOut(function(){e.remove()}),console.log(t)}).fail(function(){e.removeClass("watched")})}}});
//# sourceMappingURL=app.min.js.map